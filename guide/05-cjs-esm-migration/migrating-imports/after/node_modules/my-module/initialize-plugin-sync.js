import { createRequire } from 'module';
const require = createRequire(import.meta.url);

function initializePluginsSync(plugins) {  // Synchronous API that must remain synchronous.
  const results = [];
  for (const pluginName of plugins) {  //
    const plugin = require(`./sync-plugins/${pluginName}.js`);  // dynamic require()
    results.push(plugin.initialize());  // The plugin initialize() is synchronous
  }
  return results;
}

export { initializePluginsSync };